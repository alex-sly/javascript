(()=>{"use strict";const e=(e,t)=>{const n=document.querySelector(".view-details"),s=(e,t)=>{const n=document.createElement("div");return n.classList.add("filter-input"),n.innerHTML=`\n      <span class="filter-input_title"><u>${e}</u></span>\n      <div class="filter-input_range">\n        <div class="filter-input_input-wrapper">\n          <span><i>${t}</i></span>\n        </div>\n      </div>\n    `,n},c=e=>{const n=document.createElement("div");return t="",n.classList.add("filter-input"),e.forEach((e=>{t+=`\n        <div class="filter-input_range">\n          <div class="filter-input_input-wrapper">\n            <span>«<i>${e}</i>»</span>\n          </div>\n        </div>\n      `})),n.innerHTML='<span class="filter-input_title"><u>movies</u></span>'+t,n};n.textContent="";for(let t in e)if("photo"!==t)if("movies"!==t){const c=s(t,e[t]);n.append(c)}else n.append(c(e[t]))};let t=[],n=[],s="ALL",c="",i="ALL",a=[];const l=document.querySelector(".films"),o=document.getElementById("gender"),d=document.querySelector(".catalog-button"),r=document.querySelector(".search-wrapper_input"),u=document.querySelector(".checked-film"),p=document.querySelector(".catalog-check");let m=document.querySelector(".catalog-list");const v=s=>{n=s,l.textContent="",s.forEach(((e,n)=>{const s=((e,t)=>{const n=document.createElement("div");return n.classList.add("film","col-12","col-md-6","col-lg-4","col-xl-3"),n.dataset.id=t,n.innerHTML=`\n    <div class="card">\n      <div class="card-img-wrapper">\n        <span\n          class="card-img-top"\n          style="background-image: url('${e.photo}')"\n        ></span>\n      </div>\n      <div class="card-body justify-content-between">\n        <div class="card-name">${e.name}</div>\n        <h5 class="card-actor">actor: <i>${e.actors}</i></h5>\n        <button class="btn btn-details">Подробно</button>\n      </div>\n    </div>\n  `,n})(e,n);l.append(s),t.includes(e,0)||t.push(e),e.movies&&e.movies.forEach((e=>{a.includes(e,0)||a.push(e)}))})),a.sort(),m.textContent="";const c=document.createElement("li");c.textContent="ALL",m.append(c);for(let e=0;e<a.length;e++){const t=document.createElement("li");t.textContent=a[e],m.append(t)}e(s[0],a)},f=(e,s,c)=>{n=t,"ALL"!==e?(n=n.filter((t=>t.movies&&t.movies.includes(e,0))),p.style.display="block"):p.style.display="","ALL"!==s&&(n=n.filter((e=>e.gender.toLowerCase()===s))),c&&(n=n.filter((e=>e.name.toLowerCase().includes(c.toLowerCase())))),v(n)};d.addEventListener("click",(e=>{const t=m.closest(".catalog");"block"===t.style.display?t.style.display="":t.style.display="block"})),m.addEventListener("click",(e=>{i=e.target.textContent,u.textContent=i,f(i,s,c)})),r.addEventListener("input",(()=>{c=r.value,f(i,s,c)})),o.addEventListener("change",(()=>{s=o.options[o.selectedIndex].value,f(i,s,c)})),l.addEventListener("click",(t=>{if(t.target.classList.contains("btn-details")){const s=t.target.closest(".film").dataset.id,c=n[s];e(c,a)}})),fetch("dbHeroes.json").then((e=>e.json())).then((e=>v(e))).catch((e=>{console.log("Ошибка чтения данных: ",e)}))})();