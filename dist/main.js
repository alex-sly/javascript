(()=>{"use strict";const e=(e,t)=>{const n=document.querySelector(".view-details"),s=(e,t)=>{const n=document.createElement("div");return n.classList.add("filter-input"),n.innerHTML=`\n      <span class="filter-input_title"><u>${e}</u></span>\n      <div class="filter-input_range">\n        <div class="filter-input_input-wrapper">\n          <span><i>${t}</i></span>\n        </div>\n      </div>\n    `,n},i=e=>{const n=document.createElement("div");return t="",n.classList.add("filter-input"),e.forEach((e=>{t+=`\n        <div class="filter-input_range">\n          <div class="filter-input_input-wrapper">\n            <span>«<i>${e}</i>»</span>\n          </div>\n        </div>\n      `})),n.innerHTML='<span class="filter-input_title"><u>movies</u></span>'+t,n};n.textContent="";for(let t in e)if("photo"!==t)if("movies"!==t){const i=s(t,e[t]);n.append(i)}else n.append(i(e[t]))};let t=[],n=[],s="ALL",i="",a="ALL",c=[];const l=document.querySelector(".films"),o=document.getElementById("gender"),d=document.querySelector(".catalog-button"),r=document.querySelector(".search-wrapper_input");let u=document.querySelector(".catalog-list");const p=s=>{n=s,l.textContent="",s.forEach(((e,n)=>{const s=((e,t)=>{const n=document.createElement("div");return n.classList.add("film","col-12","col-md-6","col-lg-4","col-xl-3"),n.dataset.id=t,n.innerHTML=`\n    <div class="card">\n      <div class="card-img-wrapper">\n        <span\n          class="card-img-top"\n          style="background-image: url('${e.photo}')"\n        ></span>\n      </div>\n      <div class="card-body justify-content-between">\n        <div class="card-name">${e.name}</div>\n        <h5 class="card-actor">actor: <i>${e.actors}</i></h5>\n        <button class="btn btn-details">Подробно</button>\n      </div>\n    </div>\n  `,n})(e,n);l.append(s),t.includes(e,0)||t.push(e),e.movies&&e.movies.forEach((e=>{c.includes(e,0)||c.push(e)}))})),c.sort(),u.textContent="";const i=document.createElement("li");i.textContent="ALL",u.append(i);for(let e=0;e<c.length;e++){const t=document.createElement("li");t.textContent=c[e],u.append(t)}e(s[0],c)},m=(e,s,i)=>{n=t,"ALL"!==e&&(n=n.filter((t=>t.movies&&t.movies.includes(e,0)))),"ALL"!==s&&(n=n.filter((e=>e.gender.toLowerCase()===s))),i&&(n=n.filter((e=>e.name.toLowerCase().includes(i.toLowerCase())))),p(n)};d.addEventListener("click",(e=>{const t=u.closest(".catalog");"block"===t.style.display?t.style.display="":t.style.display="block"})),u.addEventListener("click",(e=>{a=e.target.textContent,m(a,s,i)})),r.addEventListener("input",(()=>{i=r.value,m(a,s,i)})),o.addEventListener("change",(()=>{s=o.options[o.selectedIndex].value,m(a,s,i)})),l.addEventListener("click",(t=>{if(t.target.classList.contains("btn-details")){const s=t.target.closest(".film").dataset.id,i=n[s];e(i,c)}})),fetch("dbHeroes.json").then((e=>e.json())).then((e=>p(e))).catch((e=>{console.log("Ошибка чтения данных: ",e)}))})();